graph TD
    %% === NODE DEFINITIONS ===
    A[Customer Initiates Onboarding]
    B{Select Customer Type}
    C[Individual Customer]
    D[Business Customer]
    E[Collect Individual Information <br> Name, Address, DOB, etc.]
    F[Collect Business Information <br> Company Name, Address, TIN, etc.]
    G[Identify Ultimate Beneficial Owners UBOs]
    H[Collect UBO Information]
    I{Document Collection}
    J[Identity Proof <br> Passport, Driver's License]
    K[Address Proof <br> Utility Bill, Bank Statement]
    L[Financial Information <br> Source of Funds, Income Statement]
    M{Identity Verification}
    N[Verify Document Authenticity]
    O{Is Document Valid?}
    P[Request for Additional or Valid Documents]
    Q[Screen against Sanctions and AML Lists <br> PEP, Adverse Media]
    R{Match Found?}
    S[Enhanced Due Diligence EDD]
    T[Gather Additional Information <br> Source of Wealth, Nature of Business]
    U[Manual Review by Compliance Team]
    V{High Risk?}
    W[Reject Application]
    X[Conditional Approval]
    Y{Risk Profiling}
    Z[Analyze Customer Data <br> Occupation, Location, Transaction Patterns]
    AA{Assign Risk Level}
    AB[Low Risk]
    AC[Medium Risk]
    AD[High Risk]
    AE{Decision}
    AF[Account Approved and Activated]
    AG[Ongoing Monitoring]
    AH{Transaction Monitoring}
    AI[File Suspicious Activity Report SAR]
    AJ[Review and Update Risk Profile]
    AK{Periodic Review}

    %% === LINKS AND PROCESS FLOW ===
    A --> B
    B --> C
    B --> D
    C --> E
    D --> F
    F --> G
    G --> H
    E --> I
    H --> I
    
    subgraph Document Collection
      I --> J
      I --> K
      I --> L
    end

    J --> M
    K --> M
    L --> M

    subgraph Verification and Screening
      M --> N
      N --> O
      O -- No --> P
      P --> I
      O -- Yes --> Q
    end

    Q --> R
    R -- Yes --> S
    R -- No --> Y

    subgraph Enhanced Due Diligence
        S --> T
        T --> U
        U --> V
        V -- Yes --> W
        V -- No --> X
    end
    
    subgraph Risk Assessment
        Y --> Z
        Z --> AA
        AA --> AB
        AA --> AC
        AA --> AD
    end

    AD --> S

    subgraph Final Decision
        AB --> AE
        AC --> AE
        X --> AE
        AE -- Approve --> AF
        AE -- Reject --> W
        X -- Conditions not Met --> W
    end

    AF --> AG

    subgraph Ongoing Monitoring
      AG --> AH
      AH -- Suspicious Activity --> AI
      AI --> AJ
      AH -- No Suspicious Activity --> AG
      AG --> AK
      AK -- Change in Risk --> AJ
      AK -- No Change --> AG
    end
